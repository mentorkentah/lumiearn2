<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Super Admin Registration | LUMIEARN</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>

<style>
*{box-sizing:border-box}
html,body{margin:0;height:100%}

body{
  background:#050509;
  font-family:'Orbitron',sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
  flex-direction:column;
}

.container{
  width:100%;
  max-width:440px;
  background:#0f0f18;
  padding:40px 32px;
  border-radius:22px;
  border:1px solid rgba(255,59,59,.45);
  box-shadow:0 0 35px rgba(255,0,0,.45);
  text-align:center;
}

h1{
  color:#ff3b3b;
  margin-bottom:8px;
}

.note{
  font-size:12px;
  opacity:.85;
  margin-bottom:26px;
}

.group{
  margin-bottom:18px;
}

.input{
  position:relative;
}

.input i.left{
  position:absolute;
  left:16px;
  top:50%;
  transform:translateY(-50%);
  color:#ff3b3b;
}

.input i.toggle{
  position:absolute;
  right:16px;
  top:50%;
  transform:translateY(-50%);
  color:#ff3b3b;
  cursor:pointer;
}

.input input{
  width:100%;
  height:54px;
  padding:0 44px;
  background:transparent;
  border:1px solid rgba(255,59,59,.45);
  border-radius:14px;
  color:#fff;
  font-size:14px;
}

.input input:focus{
  outline:none;
  border-color:#ff3b3b;
  box-shadow:0 0 12px rgba(255,59,59,.5);
}

button{
  width:100%;
  height:56px;
  border:none;
  border-radius:16px;
  background:#ff3b3b;
  color:#050509;
  font-weight:700;
  font-size:16px;
  cursor:pointer;
  margin-top:10px;
}

button:hover{
  box-shadow:0 0 22px rgba(255,59,59,.9);
}

#alert{
  display:none;
  margin-bottom:16px;
  padding:12px;
  border-radius:12px;
  font-size:13px;
  font-weight:600;
}

/* Login link below button */
.login-link{
  margin-top:16px;
  font-size:13px;
  opacity:0.85;
  text-align:center;
}

.login-link a{
  color:#ff3b3b;
  text-decoration:none;
  font-weight:600;
}

.login-link a:hover{
  text-decoration:underline;
}

/* Footer */
footer{
  margin-top:20px;
  font-size:12px;
  opacity:.7;
  color:#ff3b3b;
  text-align:center;
}
</style>
</head>

<body>

<div class="container">
  <h1>LUMIEARN ADMIN REGISTRATION</h1>
  <div class="note">
    ⚠ Only authorized personnel can register. Use the auth key.
  </div>

  <div id="alert"></div>

  <form id="registerForm">

    <div class="group">
      <div class="input">
        <i class="fa-solid fa-user-shield left"></i>
        <input type="text" id="username" placeholder="ADMIN USERNAME" required>
      </div>
    </div>

    <div class="group">
      <div class="input">
        <i class="fa-solid fa-envelope left"></i>
        <input type="text" id="email" placeholder="EMAIL" required>
      </div>
    </div>

    <div class="group">
      <div class="input">
        <i class="fa-solid fa-key left"></i>
        <input type="password" id="secret" placeholder="AUTH KEY" required>
        <i class="fa-solid fa-eye toggle"></i>
      </div>
    </div>

    <div class="group">
      <div class="input">
        <i class="fa-solid fa-lock left"></i>
        <input type="password" id="password" placeholder="PASSWORD" required>
        <i class="fa-solid fa-eye toggle"></i>
      </div>
    </div>

    <button type="submit">CREATE SUPER ADMIN</button>

    <div class="login-link">
      Already have an account? <a href="http://localhost:8158/admin-log.html">Log in</a>
    </div>

  </form>
</div>

<footer>
  LUMIEARN © 2026 | Super Admin Setup
</footer>

<script>
const ADMIN_SECRET = "LUMIEARN2026";
const alertBox = document.getElementById("alert");

/* ALERT FUNCTION */
function show(msg,type){
  alertBox.style.display="block";
  alertBox.textContent=msg;
  alertBox.style.background = type==="error" ? "#ff4d4d" : "#28ffb0";
  alertBox.style.color="#000";
  setTimeout(()=>alertBox.style.display="none",3000);
}

/* PASSWORD TOGGLE */
document.querySelectorAll(".toggle").forEach(icon=>{
  icon.onclick = ()=>{
    const input = icon.previousElementSibling;
    input.type = input.type==="password" ? "text" : "password";
    icon.classList.toggle("fa-eye-slash");
  };
});

/* INPUT VALIDATIONS */
const usernameField = document.getElementById("username");
const emailField = document.getElementById("email");
const passwordField = document.getElementById("password");
const secretField = document.getElementById("secret");

// username: only A-Z, 0-9, no spaces
usernameField.addEventListener("input", ()=>{
  usernameField.value = usernameField.value.toUpperCase().replace(/[^A-Z0-9]/g,"");
});

// email: letters, numbers, @, . only, no spaces
emailField.addEventListener("input", ()=>{
  emailField.value = emailField.value.replace(/[^a-zA-Z0-9@.]/g,"").toLowerCase();
});

// password and auth key: remove spaces only
passwordField.addEventListener("input", ()=>{ passwordField.value = passwordField.value.replace(/\s/g,""); });
secretField.addEventListener("input", ()=>{ secretField.value = secretField.value.replace(/\s/g,""); });

/* SUBMIT FORM */
registerForm.onsubmit = e =>{
  e.preventDefault();

  const user = usernameField.value.trim();
  const mail = emailField.value.trim();
  const pass = passwordField.value;
  const secret = secretField.value;

  if(!/^[A-Z0-9]+$/.test(user))
    return show("Username must contain only A–Z and 0–9","error");

  if(!/^[a-z0-9@.]+$/.test(mail) || (!mail.endsWith("@gmail.com") && !mail.endsWith("@icloud.com")))
    return show("Invalid email. Must end with @gmail.com or @icloud.com","error");

  if(secret !== ADMIN_SECRET)
    return show("Invalid auth key","error");

  if(pass.length < 6)
    return show("Password must be at least 6 characters","error");

  const key = "LUMIEARN_ADMIN_" + user;

  if(localStorage.getItem(key))
    return show("Admin already exists","error");

  localStorage.setItem(key, JSON.stringify({
    username:user,
    email:mail,
    password:pass,
    role:"super",
    createdAt:new Date().toISOString()
  }));

  logAction("SYSTEM","Super admin created ("+user+")");
  show("Super admin created successfully","success");

  setTimeout(()=>location.href="admin-log.html",1500);
};

/* LOG SYSTEM */
function logAction(by,action){
  const logs = JSON.parse(localStorage.getItem("LUMIEARN_ADMIN_LOGS")||"[]");
  logs.push({by,action,time:new Date().toLocaleString()});
  localStorage.setItem("LUMIEARN_ADMIN_LOGS",JSON.stringify(logs));
}
</script>

</body>
</html>