<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login | LUMIEARN</title>

<meta name="description"
content="Lumiearn | Your one stop solution to the world of financial opportunities.">

<!-- Social Preview -->
<meta property="og:image" content="https://lumiearn.vercel.app/logo.png">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>

<style>
html,body{margin:0;padding:0;height:100%;}
body{
  font-family:'Orbitron',sans-serif;
  background:#0a0a0f;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
}

/* Card */
.login-card{
  background:#111118;
  width:100%;
  max-width:420px;
  padding:35px 30px;
  border-radius:18px;
  box-shadow:0 0 25px rgba(0,255,240,.25);
}

/* Logo */
.logo{
  text-align:center;
  margin-bottom:15px;
}
.logo img{
  width:120px;
  animation:glowLogo 2s ease-in-out infinite alternate;
}
@keyframes glowLogo{
  from{filter:drop-shadow(0 0 5px #00fff0);}
  to{filter:drop-shadow(0 0 20px #00fff0); transform:scale(1.05);}
}

.title{
  text-align:center;
  font-size:26px;
  color:#00fff0;
  margin-bottom:5px;
}
.subtitle{
  text-align:center;
  font-size:13px;
  opacity:.7;
  margin-bottom:20px;
}

/* Inputs */
.form-group{margin-bottom:18px;}
label{font-size:13px;color:#0ff;margin-bottom:6px;display:block;}
.input-box{position:relative;}
.input-box i{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  color:#0ff;
}
.left-icon{left:14px;}
.toggle-password{right:14px;cursor:pointer;}
input{
  width:100%;
  height:50px;
  padding:0 40px;
  border-radius:12px;
  border:1px solid rgba(0,255,240,.4);
  background:transparent;
  color:#fff;
}
input:focus{
  outline:none;
  border-color:#0ff;
  box-shadow:0 0 10px rgba(0,255,240,.4);
}

/* Button */
.btn{
  width:100%;
  height:52px;
  border:none;
  border-radius:14px;
  background:#00fff0;
  font-weight:700;
  cursor:pointer;
  transition:.3s;
}
.btn:hover{
  box-shadow:0 0 20px rgba(0,255,240,.6);
}

/* Alert */
#alertBox{
  display:none;
  margin-bottom:15px;
  padding:10px;
  border-radius:10px;
  text-align:center;
  font-size:13px;
}

/* Link */
.register-link{
  margin-top:15px;
  text-align:center;
  font-size:13px;
}
.register-link a{
  color:#00fff0;
  text-decoration:none;
  font-weight:bold;
}
</style>
</head>

<body>

<div class="login-card">

  <div class="logo">
    <img src="https://lumiearn.vercel.app/logo.png" alt="LUMIEARN Logo">
  </div>

  <div class="title">LUMIEARN</div>
  <div class="subtitle">Secure Member Login</div>

  <div id="alertBox"></div>

  <form id="loginForm">

    <div class="form-group">
      <label>Username or Email</label>
      <div class="input-box">
        <i class="fa-solid fa-user left-icon"></i>
        <input type="text" id="usernameEmail" required>
      </div>
    </div>

    <div class="form-group">
      <label>Password</label>
      <div class="input-box">
        <i class="fa-solid fa-lock left-icon"></i>
        <input type="password" id="passwordInput" required>
        <i class="fa-solid fa-eye toggle-password"></i>
      </div>
    </div>

    <button class="btn" type="submit">Login</button>

  </form>

  <div class="register-link">
    Don't have an account? <a href="register.html">Register</a>
  </div>

</div>

<script>

/* ===== Launch Protection ===== */
const launchDate = new Date(2026, 1, 9, 13, 30, 0).getTime();
if(Date.now() < launchDate && !window.location.pathname.includes("countdown.html")){
  window.location.href="countdown.html";
}

/* ===== Auto Login Redirect ===== */
const activeSession = JSON.parse(localStorage.getItem("LOGGED_IN_USER"));
if(activeSession){
  if(activeSession.user.paid){
    window.location.href="dashboard.html";
  } else {
    window.location.href="payment.html";
  }
}

/* ===== Password Toggle ===== */
document.querySelectorAll(".toggle-password").forEach(icon=>{
  icon.onclick=()=>{
    const input=icon.previousElementSibling;
    input.type=input.type==="password"?"text":"password";
    icon.classList.toggle("fa-eye-slash");
  };
});

/* ===== Login Logic ===== */
const form=document.getElementById("loginForm");
const alertBox=document.getElementById("alertBox");

form.addEventListener("submit",e=>{
  e.preventDefault();

  const u=document.getElementById("usernameEmail").value.trim().toLowerCase();
  const p=document.getElementById("passwordInput").value;

  let foundUser=null;

  for(let i=0;i<localStorage.length;i++){
    const key=localStorage.key(i);
    if(key.startsWith("LUMIEARN_USER_")){
      const user=JSON.parse(localStorage.getItem(key));
      if(user.username.toLowerCase()===u || user.email.toLowerCase()===u){
        foundUser=user;
        break;
      }
    }
  }

  if(!foundUser){
    return showAlert("User not found","error");
  }

  if(foundUser.password!==p){
    return showAlert("Incorrect password","error");
  }

  localStorage.setItem("LOGGED_IN_USER",JSON.stringify({
    user:foundUser,
    loginTime:Date.now()
  }));

  showAlert("Login successful...","success");

  setTimeout(()=>{
    if(foundUser.paid){
      window.location.href="dashboard.html";
    } else {
      window.location.href="payment.html";
    }
  },1000);
});

function showAlert(msg,type){
  alertBox.style.display="block";
  alertBox.innerText=msg;
  alertBox.style.background=type==="error"?"#ff4d4d":"#0ff";
  alertBox.style.color=type==="error"?"#fff":"#000";
}

</script>

</body>
</html>